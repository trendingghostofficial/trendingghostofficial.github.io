import{a as Q,b as A,c as J,d as Oe,f as De,g as Ee,h as Te,i as Fe,p as Le,q as Ve,r as Ae,s as Ne}from"./chunk-HIPZZVE4.js";import{a as Ie}from"./chunk-R2BMEKNG.js";import{a as ve,c as K,e as Me,f as L,g as we,h as ke,i as Pe}from"./chunk-PXPQQ5BB.js";import{$a as pe,$b as W,Ab as _,Bb as y,Ca as Y,Cb as fe,Ea as me,Fa as F,Fb as he,Ga as r,Gb as _e,Hb as be,K as U,Mb as u,Na as M,Nb as g,O as q,Ra as S,Tb as $,U as f,V as h,Wa as b,aa as O,ac as D,cc as I,ea as ae,fa as se,fb as c,gb as o,gc as R,ha as le,hb as i,ib as x,ic as xe,jc as Ce,ka as ce,kc as ye,lc as Se,mb as w,mc as V,oa as de,ob as p,qb as d,v as G,vb as ue,wb as ge,xb as C,zb as l}from"./chunk-WLODD2E2.js";var ze=[{path:"",loadComponent:()=>import("./chunk-PBRF6UOJ.js").then(t=>t.HomeComponent).catch(t=>{throw t})},{path:"capitulos",loadComponent:()=>import("./chunk-QY3NU7ZN.js").then(t=>t.CapitulosComponent).catch(t=>{throw t})},{path:"capitulos/:volumen/:numero",loadComponent:()=>import("./chunk-IRZ3OTX7.js").then(t=>t.LectorComponent).catch(t=>{throw t})},{path:"mundo",loadComponent:()=>import("./chunk-7YJEHRAY.js").then(t=>t.MundoComponent).catch(t=>{throw t})},{path:"personajes",loadComponent:()=>import("./chunk-A7KYSS5G.js").then(t=>t.PersonajesComponent).catch(t=>{throw t})},{path:"bestiario",loadComponent:()=>import("./chunk-4KF2V5FU.js").then(t=>t.BestiarioComponent).catch(t=>{throw t})},{path:"sobre",loadComponent:()=>import("./chunk-B44VHSRA.js").then(t=>t.SobreComponent).catch(t=>{throw t})},{path:"sobre/manifiesto",loadComponent:()=>import("./chunk-WU7VXOSF.js").then(t=>t.ManifiestoMundoComponent).catch(t=>{throw t})},{path:"legal/license",loadComponent:()=>import("./chunk-T6HFNOX2.js").then(t=>t.LicenseComponent).catch(t=>{throw t})},{path:"legal/autoria",loadComponent:()=>import("./chunk-WQFKXOPV.js").then(t=>t.AutoriaComponent).catch(t=>{throw t})},{path:"legal/privacidad",loadComponent:()=>import("./chunk-RB3FDPPE.js").then(t=>t.PrivacidadComponent).catch(t=>{throw t})},{path:"legal/terminos",loadComponent:()=>import("./chunk-4NPXCQI5.js").then(t=>t.TerminosComponent).catch(t=>{throw t})},{path:"contacto",loadComponent:()=>import("./chunk-HAMDOEI4.js").then(t=>t.ContactoComponent).catch(t=>{throw t})},{path:"commits",loadComponent:()=>import("./chunk-CXMYOANY.js").then(t=>t.CommitsComponent).catch(t=>{throw t})},{path:"**",redirectTo:""}];var N=class t{constructor(n){this.router=n;this.initSession(),this.detectCountry(),this.trackNavigation()}ANALYTICS_WORKER="https://worker-analytics.trendingghostofficial.workers.dev/api/analytics";country=null;sessionId="";isEnabled=Ne.analytics.enabled;initSession(){let n=sessionStorage.getItem("tg_session");n||(n=`sess_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("tg_session",n)),this.sessionId=n}async detectCountry(){try{let e=await(await fetch("https://ipapi.co/json/")).json();this.country=e.country_code||null}catch(n){n instanceof Error&&console.warn("\u26A0\uFE0F No se pudo detectar el pa\xEDs del usuario",n.message),this.country=null}}getLanguage(){return navigator.language||"unknown"}getScreenSize(){let n=window.screen.width;return n<768?"small":n<1024?"medium":n<1920?"large":"xlarge"}getDeviceType(){let n=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(n)?"tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(n)?"mobile":"desktop"}trackNavigation(){this.router.events.pipe(G(n=>n instanceof K)).subscribe(n=>{this.logPageView(n.urlAfterRedirects)})}async logPageView(n){if(!this.isEnabled)return;let e={timestamp:new Date().toISOString(),sessionId:this.sessionId,route:n,country:this.country,referrer:document.referrer||"direct",device:this.getDeviceType(),language:this.getLanguage(),screenSize:this.getScreenSize()};try{await this.sendToWorker(e)}catch(a){a instanceof Error&&console.warn("\u26A0\uFE0F No se pudo trackear el evento de ruta",e.route,a.message)}}async sendToWorker(n){try{let e=await fetch(this.ANALYTICS_WORKER,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!e.ok)throw new Error(`Worker respondi\xF3 con status ${e.status}`)}catch(e){throw e instanceof Error?e:new Error("Error desconocido al enviar evento al Worker")}}disable(){this.isEnabled=!1,localStorage.setItem("tg_analytics_disabled","true")}enable(){this.isEnabled=!0,localStorage.removeItem("tg_analytics_disabled")}isAnalyticsEnabled(){return this.isEnabled&&localStorage.getItem("tg_analytics_disabled")!=="true"}static \u0275fac=function(e){return new(e||t)(q(L))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var je={providers:[ae(),Pe(ze),Ce(ye()),N]};function Ge(t,n){if(t&1){let e=w();o(0,"button",21),p("click",function(){f(e),d();let s=ue(11);return d().clearFilter(),h(s.focus())}),l(1," \u2715 "),i()}}function Ue(t,n){if(t&1&&(o(0,"div",22)(1,"span",23),l(2),i()()),t&2){let e=d(2);r(2),fe("",e.idiomasFiltrados.length," de ",e.idiomasDisponibles.length)}}function qe(t,n){t&1&&(o(0,"span",12),l(1,"\u2713"),i())}function Ye(t,n){if(t&1){let e=w();o(0,"button",24),p("click",function(){let s=f(e).$implicit,m=d(2);return h(m.selectLanguage(s.codigo))}),x(1,"img",3),b(2,qe,2,0,"span",25),i()}if(t&2){let e=n.$implicit,a=d(2);C("active",e.codigo===a.currentLanguage),c("title",e.nombre_nativo),r(),c("src",a.getFlagUrl(e.codigo),Y)("alt",e.nombre_nativo),r(),c("ngIf",e.codigo===a.currentLanguage)}}function $e(t,n){t&1&&(o(0,"div",26)(1,"span",27),l(2,"\u{1F50D}"),i(),o(3,"span",28),l(4,"No se encontraron idiomas"),i()())}function We(t,n){if(t&1){let e=w();o(0,"div",8)(1,"div",9)(2,"button",10),x(3,"img",3),o(4,"span",11),l(5),i(),o(6,"span",12),l(7,"\u2713"),i()()(),x(8,"div",13),o(9,"div",14)(10,"input",15,0),be("ngModelChange",function(s){f(e);let m=d();return _e(m.filterText,s)||(m.filterText=s),h(s)}),p("input",function(){f(e);let s=d();return h(s.onFilterChange())}),i(),b(12,Ge,2,0,"button",16),i(),b(13,Ue,3,2,"div",17),o(14,"div",18),b(15,Ye,3,6,"button",19),i(),b(16,$e,5,0,"div",20),i()}if(t&2){let e=d();r(2),C("active",!0),r(),c("src",e.getFlagUrl(e.currentLanguage),Y)("alt",(e.currentIdioma==null?null:e.currentIdioma.nombre_nativo)||"Flag"),r(2),_((e.currentIdioma==null?null:e.currentIdioma.nombre_nativo)||"Espa\xF1ol"),r(5),he("ngModel",e.filterText),r(2),c("ngIf",e.filterText),r(),c("ngIf",e.filterText),r(2),c("ngForOf",e.idiomasFiltrados),r(),c("ngIf",e.filterText&&e.idiomasFiltrados.length===0)}}function Ke(t,n){if(t&1){let e=w();o(0,"div",29),p("click",function(){f(e);let s=d();return h(s.closeDropdown())}),i()}}var X=class t{constructor(n){this.i18n=n}currentLanguage="es";currentIdioma=null;idiomasDisponibles=[];idiomasFiltrados=[];isExpanded=!1;filterText="";ngOnInit(){this.i18n.getCurrentLanguage().subscribe(n=>{this.currentLanguage=n,this.updateCurrentIdioma()}),this.i18n.getIdiomasDisponibles().subscribe(n=>{this.idiomasDisponibles=n,this.idiomasFiltrados=n,this.updateCurrentIdioma()})}updateCurrentIdioma(){this.currentIdioma=this.idiomasDisponibles.find(n=>n.codigo===this.currentLanguage)||null}toggleDropdown(){this.isExpanded=!this.isExpanded,this.isExpanded||this.clearFilter()}closeDropdown(){this.isExpanded=!1,this.clearFilter()}selectLanguage(n){this.i18n.setLanguage(n),this.closeDropdown()}getCurrentEmoji(){if(this.currentIdioma?.icono_emoji)return this.currentIdioma.icono_emoji;let n=this.idiomasDisponibles.find(e=>e.codigo===this.currentLanguage);return n?.icono_emoji?n.icono_emoji:"\u{1F310}"}onFilterChange(){let n=this.filterText.toLowerCase().trim();if(!n){this.idiomasFiltrados=this.idiomasDisponibles;return}this.idiomasFiltrados=this.idiomasDisponibles.filter(e=>e.nombre_nativo.toLowerCase().includes(n)||e.nombre_ingles.toLowerCase().includes(n)||e.codigo.toLowerCase().includes(n))}clearFilter(){this.filterText="",this.idiomasFiltrados=this.idiomasDisponibles}getFlagUrl(n){return`https://flagcdn.com/w40/${{es:"es",en:"gb",ja:"jp",pt:"br",fr:"fr",de:"de",it:"it",ko:"kr","zh-CN":"cn","zh-TW":"tw",ru:"ru",pl:"pl",tr:"tr",hi:"in",ar:"sa"}[n]||"xx"}.png`}static \u0275fac=function(e){return new(e||t)(M(Se))};static \u0275cmp=S({type:t,selectors:[["app-language-selector"]],decls:9,vars:9,consts:[["filterInput",""],[1,"language-selector-global"],[1,"current-language",3,"click","title"],[1,"flag-img",3,"src","alt"],[1,"code"],[1,"arrow"],["class","language-dropdown",4,"ngIf"],["class","dropdown-overlay",3,"click",4,"ngIf"],[1,"language-dropdown"],[1,"current-selection"],[1,"language-option","selected"],[1,"name"],[1,"check"],[1,"dropdown-separator"],[1,"filter-box"],["type","text","placeholder","\u{1F50D} Buscar idioma...","autocomplete","off","spellcheck","false",1,"filter-input",3,"ngModelChange","input","ngModel"],["class","clear-filter","title","Limpiar b\xFAsqueda",3,"click",4,"ngIf"],["class","filter-results",4,"ngIf"],[1,"languages-grid"],["class","language-option",3,"active","title","click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],["title","Limpiar b\xFAsqueda",1,"clear-filter",3,"click"],[1,"filter-results"],[1,"count"],[1,"language-option",3,"click","title"],["class","check",4,"ngIf"],[1,"no-results"],[1,"icon"],[1,"text"],[1,"dropdown-overlay",3,"click"]],template:function(e,a){e&1&&(o(0,"div",1)(1,"button",2),p("click",function(){return a.toggleDropdown()}),x(2,"img",3),o(3,"span",4),l(4),i(),o(5,"span",5),l(6),i()(),b(7,We,17,10,"div",6)(8,Ke,1,0,"div",7),i()),e&2&&(C("expanded",a.isExpanded),r(),c("title","Cambiar idioma / Change language"),r(),c("src",a.getFlagUrl(a.currentLanguage),Y)("alt",(a.currentIdioma==null?null:a.currentIdioma.nombre_nativo)||"Flag"),r(2),_(((a.currentIdioma==null?null:a.currentIdioma.codigo)||"es").toUpperCase()),r(2),_(a.isExpanded?"\u25B2":"\u25BC"),r(),c("ngIf",a.isExpanded),r(),c("ngIf",a.isExpanded))},dependencies:[I,W,D,Ve,Q,J,De],styles:[".language-selector-global[_ngcontent-%COMP%]{position:relative;z-index:9999}.current-language[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.35rem;padding:.3rem .5rem;background:#0a0a0a;border:1px solid #00ff00;border-radius:4px;color:#e0e0e0;font-family:Courier New,monospace;font-size:.75rem;cursor:pointer;transition:all .2s ease}.current-language[_ngcontent-%COMP%]:hover{background:#1a1a1a;box-shadow:0 0 10px #0f03}.current-language[_ngcontent-%COMP%]   .flag-img[_ngcontent-%COMP%]{width:20px;height:15px;object-fit:cover;border-radius:2px;flex-shrink:0}.current-language[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{font-weight:700;color:#0f0;font-size:.75rem}.current-language[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{font-size:.6rem;color:#888;transition:transform .2s ease}.expanded[_ngcontent-%COMP%]   .current-language[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}.language-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + .4rem);right:0;min-width:120px;max-width:140px;background:#0a0a0a;border:1px solid #00ff00;border-radius:6px;box-shadow:0 8px 24px #000000e6,0 0 20px #0f03;overflow:hidden;animation:_ngcontent-%COMP%_slideDown .2s ease;z-index:10000}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.current-selection[_ngcontent-%COMP%]{padding:.5rem;background:#00ff000d;border-bottom:1px solid #1a1a1a}.current-selection[_ngcontent-%COMP%]   .language-option[_ngcontent-%COMP%]{background:#00ff0026;border:1px solid #00ff00;border-radius:4px;pointer-events:none}.current-selection[_ngcontent-%COMP%]   .language-option[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{color:#0f0;font-size:1.1rem;font-weight:700}.dropdown-separator[_ngcontent-%COMP%]{height:1px;background:linear-gradient(to right,transparent,#00ff00 20%,#00ff00 80%,transparent);margin:.3rem 0;opacity:.5}.filter-box[_ngcontent-%COMP%]{position:relative;padding:.5rem;background:#0a0a0a;border-bottom:1px solid #1a1a1a}.filter-input[_ngcontent-%COMP%]{width:100%;padding:.5rem 2rem .5rem .7rem;background:#1a1a1a;border:1px solid #333;border-radius:4px;color:#e0e0e0;font-family:Courier New,monospace;font-size:.8rem;outline:none;transition:all .2s ease}.filter-input[_ngcontent-%COMP%]::placeholder{color:#666}.filter-input[_ngcontent-%COMP%]:focus{border-color:#0f0;box-shadow:0 0 8px #0f03;background:#0f0f0f}.clear-filter[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);background:transparent;border:none;color:#888;font-size:1rem;cursor:pointer;padding:.2rem .4rem;transition:color .2s ease}.clear-filter[_ngcontent-%COMP%]:hover{color:red}.filter-results[_ngcontent-%COMP%]{padding:.3rem .7rem;background:#00ff000d;border-bottom:1px solid #1a1a1a;font-family:Courier New,monospace;font-size:.7rem;color:#0f0;text-align:center}.filter-results[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-weight:700}.no-results[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#666;font-family:Courier New,monospace}.no-results[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:block;font-size:2rem;margin-bottom:.5rem;opacity:.5}.no-results[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.85rem}.languages-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.25rem;padding:.4rem;max-height:300px;overflow-y:auto}.languages-grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.languages-grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0a0a0a}.languages-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0f0;border-radius:3px}.languages-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0c0}.language-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem;width:100%;padding:.5rem .6rem;background:transparent;border:1px solid #1a1a1a;border-radius:4px;color:#e0e0e0;font-family:Courier New,monospace;font-size:.75rem;text-align:left;cursor:pointer;transition:all .15s ease}.language-option[_ngcontent-%COMP%]:hover{background:#1a1a1a;border-color:#333}.language-option.active[_ngcontent-%COMP%]{background:#00ff001a;border-color:#0f0}.language-option[_ngcontent-%COMP%]   .flag-img[_ngcontent-%COMP%]{width:20px;height:15px;object-fit:cover;border-radius:2px;flex-shrink:0}.language-option[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1;font-size:.75rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.language-option[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{color:#0f0;font-size:.85rem;margin-left:auto;flex-shrink:0}.dropdown-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:9998;background:transparent}@media(max-width:768px){.language-dropdown[_ngcontent-%COMP%]{min-width:340px;max-width:90vw}.languages-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);max-height:300px}.filter-input[_ngcontent-%COMP%]{font-size:.75rem;padding:.45rem 1.8rem .45rem .6rem}.clear-filter[_ngcontent-%COMP%]{right:.9rem;font-size:.9rem}.current-language[_ngcontent-%COMP%]{padding:.25rem .4rem;font-size:.7rem}.current-language[_ngcontent-%COMP%]   .emoji[_ngcontent-%COMP%]{font-size:.9rem}.language-option[_ngcontent-%COMP%]{padding:.4rem .5rem;font-size:.7rem}.language-option[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.7rem}}@media(max-width:480px){.language-dropdown[_ngcontent-%COMP%]{min-width:280px;right:-20px}.languages-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.25rem}.filter-input[_ngcontent-%COMP%]{font-size:.7rem}.language-option[_ngcontent-%COMP%]{padding:.5rem}.no-results[_ngcontent-%COMP%]{padding:1.5rem 1rem}.no-results[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};var B=(function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t})(B||{});function j(t,n){return{type:B.Trigger,name:t,definitions:n,options:{}}}function E(t,n=null){return{type:B.Animate,styles:n,timings:t}}function P(t){return{type:B.Style,styles:t,offset:null}}function T(t,n,e=null){return{type:B.Transition,expr:t,animation:n,options:e}}function Qe(t,n){t&1&&x(0,"div",8)}function Je(t,n){t&1&&(o(0,"span",13),l(1,"\u25B6"),i())}function Xe(t,n){if(t&1&&(o(0,"div",9)(1,"span",10),l(2),i(),o(3,"span",11),l(4),u(5,"translate"),i(),b(6,Je,2,0,"span",12),i()),t&2){let e=d().$implicit;r(2),_(e.icon),r(2),_(g(5,3,e.label)),r(2),c("ngIf",e.children&&e.children.length>0)}}function Ze(t,n){t&1&&x(0,"div",8)}function et(t,n){if(t&1&&(o(0,"div",9)(1,"span",10),l(2),i(),o(3,"span",11),l(4),u(5,"translate"),i()()),t&2){let e=d().$implicit;r(2),_(e.icon),r(2),_(g(5,2,e.label))}}function tt(t,n){if(t&1){let e=w();o(0,"div",16),p("click",function(s){let m=f(e).$implicit;return d(4).onItemClick(m,s),h(s.stopPropagation())}),b(1,Ze,1,0,"div",5)(2,et,6,4,"div",6),i()}if(t&2){let e=n.$implicit;C("separator",e.separator)("disabled",e.disabled),r(),c("ngIf",e.separator),r(),c("ngIf",!e.separator)}}function nt(t,n){if(t&1){let e=w();o(0,"div",14),p("mouseenter",function(){f(e);let s=d().$implicit,m=d(2);return h(m.onSubmenuEnter(s))})("mouseleave",function(){f(e);let s=d().$implicit,m=d(2);return h(m.onSubmenuLeave(s))}),b(1,tt,3,6,"div",15),i()}if(t&2){let e=d().$implicit,a=d(2);C("visible",e===a.hoveredItem),r(),c("ngForOf",e.children)}}function it(t,n){if(t&1){let e=w();o(0,"div",4),p("click",function(s){let m=f(e).$implicit,k=d(2);return h(k.onItemClick(m,s))})("mouseenter",function(s){let m=f(e).$implicit,k=d(2);return h(k.onItemHover(m,s))})("mouseleave",function(s){let m=f(e).$implicit,k=d(2);return h(k.onItemLeave(m,s))}),b(1,Qe,1,0,"div",5)(2,Xe,7,5,"div",6)(3,nt,2,3,"div",7),i()}if(t&2){let e=n.$implicit;C("separator",e.separator)("disabled",e.disabled)("has-children",e.children&&e.children.length>0),r(),c("ngIf",e.separator),r(),c("ngIf",!e.separator),r(),c("ngIf",e.children&&e.children.length>0)}}function ot(t,n){if(t&1){let e=w();o(0,"div",1),p("click",function(){f(e);let s=d();return h(s.close())}),o(1,"div",2),p("click",function(s){return f(e),h(s.stopPropagation())}),b(2,it,4,9,"div",3),i()()}if(t&2){let e=d();c("@fadeIn",void 0),r(),ge("left",e.data==null?null:e.data.x,"px")("top",e.data==null?null:e.data.y,"px"),r(),c("ngForOf",e.menuItems)}}var ee=class t{constructor(n,e){this.elementRef=n;this.cdr=e}visible=!1;data=null;itemSelected=new O;closed=new O;menuItems=[];hoveredItem=null;isHoveringSubmenu=!1;hoverTimer;ngOnChanges(){this.visible&&this.data&&this.buildMenuItems()}buildMenuItems(){this.menuItems=[...this.data?.selectedText?[{id:"translation-feedback",label:"\u270F\uFE0F Corregir traducci\xF3n",icon:"\u270F\uFE0F",action:"translation-feedback"}]:[],...this.data?.selectedText?[{id:"separator-1",label:"",icon:"",action:"",separator:!0}]:[],{id:"nav-home",label:"Inicio",icon:"\u{1F3E0}",action:"navigate-home",children:[{id:"nav-home-main",label:"P\xE1gina principal",icon:"\u{1F3E0}",action:"navigate-home-main"},{id:"nav-home-lore",label:"\u{1F4D6} Leer historia",icon:"\u{1F4D6}",action:"navigate-home-lore"}]},{id:"nav-chapters",label:"Cap\xEDtulos",icon:"\u{1F4DA}",action:"navigate-chapters"},{id:"nav-characters",label:"\u{1F465} Personajes",icon:"\u{1F465}",action:"navigate-characters"},{id:"nav-world",label:"\u{1F30D} Mundo",icon:"\u{1F30D}",action:"navigate-world"},{id:"nav-bestiary",label:"\u{1F43E} Bestiario",icon:"\u{1F43E}",action:"navigate-bestiary"},{id:"nav-about",label:"\u{1F4D6} Sobre",icon:"\u{1F4D6}",action:"navigate-about"},{id:"separator-2",label:"",icon:"",action:"",separator:!0},{id:"community",label:"Comunidad",icon:"\u{1F310}",action:"community",children:[{id:"community-twitter",label:"\u{1F426} Twitter/X",icon:"\u{1F426}",action:"open-twitter"},{id:"community-ko-fi",label:"\u2615 Ko-fi (Donar)",icon:"\u2615",action:"open-kofi"},{id:"community-github",label:"\u{1F4BB} GitHub",icon:"\u{1F4BB}",action:"open-github"},{id:"separator-community",label:"",icon:"",action:"",separator:!0},{id:"community-rss",label:"\u{1F4E1} RSS Feed",icon:"\u{1F4E1}",action:"open-rss"}]},{id:"legal",label:"Legal",icon:"\u2696\uFE0F",action:"legal",children:[{id:"legal-license",label:"\u{1F4DC} Licencia",icon:"\u{1F4DC}",action:"navigate-license"},{id:"legal-privacy",label:"\u{1F512} Privacidad",icon:"\u{1F512}",action:"navigate-privacy"},{id:"legal-terms",label:"\u{1F4CB} T\xE9rminos",icon:"\u{1F4CB}",action:"navigate-terms"},{id:"legal-manifesto",label:"\u{1F4D6} Manifiesto",icon:"\u{1F4D6}",action:"navigate-manifesto"}]},{id:"separator-3",label:"",icon:"",action:"",separator:!0},{id:"copy-url",label:"Copiar URL",icon:"\u{1F517}",action:"copy-url"},{id:"copy-text",label:"Copiar texto",icon:"\u{1F4DD}",action:"copy-text",disabled:!this.data?.selectedText},{id:"separator-4",label:"",icon:"",action:"",separator:!0},{id:"system-info",label:"Informaci\xF3n",icon:"\u2139\uFE0F",action:"system-info",children:[{id:"system-language",label:`Idioma: ${this.data?.language?.toUpperCase()||"ES"}`,icon:"\u{1F30D}",action:"show-language"},{id:"system-version",label:"Versi\xF3n: 2.0.0",icon:"\u{1F4E6}",action:"show-version"},{id:"system-analytics",label:"\u{1F4CA} Commits",icon:"\u{1F4CA}",action:"navigate-analytics"}]},{id:"separator-5",label:"",icon:"",action:"",separator:!0},{id:"user-info",label:"Fixing nav",icon:"",action:"",disabled:!0}]}onItemClick(n,e){e.preventDefault(),e.stopPropagation(),!(n.disabled||n.separator)&&(this.itemSelected.emit({item:n,data:this.data}),n.children||this.close())}onItemHover(n,e){console.log("Hover sobre item:",n.id,"tiene children:",!!n.children),this.hoverTimer&&clearTimeout(this.hoverTimer),n.children&&n.children.length>0&&(this.hoverTimer=setTimeout(()=>{console.log("Mostrando submen\xFA para:",n.id),this.hoveredItem=n,this.cdr.detectChanges()},150))}onItemLeave(n,e){console.log("Leave de item:",n.id),this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=setTimeout(()=>{this.isHoveringSubmenu||(console.log("Ocultando submen\xFA para:",n.id),this.hoveredItem=null,this.cdr.detectChanges())},100)}onSubmenuEnter(n){console.log("Enter en submen\xFA de:",n.id),this.hoverTimer&&clearTimeout(this.hoverTimer),this.isHoveringSubmenu=!0,this.hoveredItem=n,this.cdr.detectChanges()}onSubmenuLeave(n){console.log("Leave de submen\xFA de:",n.id),this.isHoveringSubmenu=!1,this.hoverTimer=setTimeout(()=>{this.isHoveringSubmenu||(console.log("Ocultando submen\xFA despu\xE9s de leave"),this.hoveredItem=null,this.cdr.detectChanges())},150)}close(){this.visible=!1,this.hoveredItem=null,this.isHoveringSubmenu=!1,this.hoverTimer&&clearTimeout(this.hoverTimer),this.closed.emit(),this.cdr.detectChanges()}ngOnDestroy(){this.hoverTimer&&clearTimeout(this.hoverTimer)}onDocumentClick(n){this.visible&&!this.elementRef.nativeElement.contains(n.target)&&this.close()}onEscape(){this.visible&&this.close()}onContextMenu(n){n.preventDefault()}static \u0275fac=function(e){return new(e||t)(M(ce),M($))};static \u0275cmp=S({type:t,selectors:[["app-context-menu"]],hostBindings:function(e,a){e&1&&p("click",function(m){return a.onDocumentClick(m)},F)("keydown.escape",function(){return a.onEscape()},F)("contextmenu",function(m){return a.onContextMenu(m)})},inputs:{visible:"visible",data:"data"},outputs:{itemSelected:"itemSelected",closed:"closed"},features:[le],decls:1,vars:1,consts:[["class","context-menu-overlay",3,"click",4,"ngIf"],[1,"context-menu-overlay",3,"click"],[1,"context-menu",3,"click"],["class","menu-item",3,"separator","disabled","has-children","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"menu-item",3,"click","mouseenter","mouseleave"],["class","separator-line",4,"ngIf"],["class","item-content",4,"ngIf"],["class","submenu",3,"visible","mouseenter","mouseleave",4,"ngIf"],[1,"separator-line"],[1,"item-content"],[1,"item-icon"],[1,"item-label"],["class","item-arrow",4,"ngIf"],[1,"item-arrow"],[1,"submenu",3,"mouseenter","mouseleave"],["class","submenu-item",3,"separator","disabled","click",4,"ngFor","ngForOf"],[1,"submenu-item",3,"click"]],template:function(e,a){e&1&&b(0,ot,3,6,"div",0),e&2&&c("ngIf",a.visible)},dependencies:[I,W,D,V],styles:['.context-menu-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9999;background:transparent;pointer-events:none}.context-menu[_ngcontent-%COMP%]{position:absolute;background:#000000f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:8px;box-shadow:0 8px 32px #0000004d;min-width:200px;max-width:300px;pointer-events:all;overflow:hidden}.context-menu.position-adjusted[_ngcontent-%COMP%]{transform:translate(-100%)}.menu-item[_ngcontent-%COMP%]{position:relative}.menu-item[_ngcontent-%COMP%]:hover:not(.separator):not(.disabled){background:#ffffff1a}.menu-item.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.menu-item.has-children[_ngcontent-%COMP%]{position:relative}.item-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 15px;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .15s ease}.item-content[_ngcontent-%COMP%]:hover{background:#ffffff0d}.item-icon[_ngcontent-%COMP%]{font-size:14px;margin-right:10px;width:16px;text-align:center;flex-shrink:0}.item-label[_ngcontent-%COMP%]{flex:1;font-size:14px;font-weight:400;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.item-arrow[_ngcontent-%COMP%]{font-size:10px;color:#fff9;margin-left:10px;transition:transform .15s ease}.menu-item.has-children[_ngcontent-%COMP%]:hover   .item-arrow[_ngcontent-%COMP%]{transform:translate(2px)}.separator-line[_ngcontent-%COMP%]{height:1px;background:#ffffff1a;margin:4px 0}.submenu[_ngcontent-%COMP%]{position:absolute;left:100%;top:0;background:#000000f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:8px;box-shadow:0 8px 32px #0000004d;min-width:180px;opacity:0;visibility:hidden;transform:translate(-10px);transition:all .15s ease;pointer-events:none;z-index:10000}.submenu.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translate(0);pointer-events:all}.submenu-item[_ngcontent-%COMP%]:hover:not(.separator):not(.disabled){background:#ffffff1a}.submenu-item.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.submenu[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.submenu[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{font-size:12px;width:14px}.context-menu[_ngcontent-%COMP%]{font-family:Courier New,monospace;border:1px solid rgba(0,255,255,.3);box-shadow:0 0 20px #00ffff1a,0 8px 32px #00000080}.menu-item[_ngcontent-%COMP%]:hover:not(.separator):not(.disabled){background:linear-gradient(90deg,#00ffff1a,#ff00ff1a);border-left:3px solid rgba(0,255,255,.6)}.submenu[_ngcontent-%COMP%]{border:1px solid rgba(255,0,255,.3);box-shadow:0 0 15px #ff00ff1a,0 8px 32px #00000080}.context-menu[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_menuSlideIn .2s ease-out}@keyframes _ngcontent-%COMP%_menuSlideIn{0%{opacity:0;transform:scale(.9) translateY(-5px)}to{opacity:1;transform:scale(1) translateY(0)}}.submenu[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_submenuSlideIn .15s ease-out}@keyframes _ngcontent-%COMP%_submenuSlideIn{0%{opacity:0;transform:translate(-10px) scale(.95)}to{opacity:1;transform:translate(0) scale(1)}}@media(max-width:768px){.context-menu[_ngcontent-%COMP%]{min-width:180px;max-width:250px}.submenu[_ngcontent-%COMP%]{min-width:160px}.item-content[_ngcontent-%COMP%]{padding:12px 15px}.submenu[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]{padding:10px 12px}}.menu-item[_ngcontent-%COMP%]:focus{outline:2px solid rgba(0,255,255,.6);outline-offset:-2px}.item-content[_ngcontent-%COMP%]:focus{outline:none}.menu-item.loading[_ngcontent-%COMP%]{position:relative}.menu-item.loading[_ngcontent-%COMP%]:after{content:"";position:absolute;right:10px;top:50%;width:12px;height:12px;border:2px solid rgba(255,255,255,.3);border-top:2px solid rgba(0,255,255,.8);border-radius:50%;transform:translateY(-50%);animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:translateY(-50%) rotate(0)}to{transform:translateY(-50%) rotate(360deg)}}'],data:{animation:[j("fadeIn",[T(":enter",[P({opacity:0,transform:"scale(0.95)"}),E("150ms ease-out",P({opacity:1,transform:"scale(1)"}))]),T(":leave",[E("100ms ease-in",P({opacity:0,transform:"scale(0.95)"}))])])]}})};function rt(t,n){t&1&&(o(0,"small",31),l(1," La sugerencia debe tener al menos 10 caracteres "),i())}function at(t,n){t&1&&(o(0,"small",31),l(1," Email inv\xE1lido "),i())}function st(t,n){if(t&1&&(o(0,"div",32),l(1),i()),t&2){let e=d(3);r(),y(" \u26A0\uFE0F ",e.error," ")}}function lt(t,n){t&1&&(o(0,"span"),l(1),u(2,"translate"),i()),t&2&&(r(),_(g(2,1,"translation_feedback.submit_button")))}function ct(t,n){t&1&&(o(0,"span"),l(1,"Enviando... \u23F3"),i())}function dt(t,n){if(t&1){let e=w();o(0,"div",5)(1,"div",6)(2,"h2"),l(3,"\u270F\uFE0F Sugerir traducci\xF3n"),i(),o(4,"button",7),p("click",function(){f(e);let s=d(2);return h(s.close())}),l(5," \u2715 "),i()(),o(6,"div",8)(7,"div",9)(8,"p")(9,"strong"),l(10,"Cap\xEDtulo:"),i(),l(11),i(),o(12,"p")(13,"strong"),l(14,"Idioma:"),i(),l(15),i()(),o(16,"div",10)(17,"label"),l(18,"\u{1F4DD} Texto original:"),i(),o(19,"blockquote"),l(20),i()(),o(21,"form",11),p("ngSubmit",function(){f(e);let s=d(2);return h(s.submitFeedback())}),o(22,"div",12)(23,"label",13),l(24," \u2728 Tu sugerencia: "),o(25,"span",14),l(26,"*"),i()(),x(27,"textarea",15),o(28,"small",16),l(29),i(),b(30,rt,2,0,"small",17),i(),o(31,"div",12)(32,"label",18),l(33,"\u{1F4AD} Raz\xF3n (opcional):"),i(),x(34,"textarea",19),o(35,"small",16),l(36),i()(),o(37,"div",20)(38,"p",21),l(39,"\u{1F4EC} Contacto (opcional):"),i(),o(40,"small",22),l(41," D\xE9janos tu email o Discord para avisarte si tu sugerencia es aceptada y ganar puntos en el ranking de traductores. "),i(),o(42,"div",23)(43,"div",12),x(44,"input",24),b(45,at,2,0,"small",17),i(),o(46,"div",12),x(47,"input",25),i()()(),b(48,st,2,1,"div",26),o(49,"div",27)(50,"button",28),p("click",function(){f(e);let s=d(2);return h(s.close())}),l(51," Cancelar "),i(),o(52,"button",29),b(53,lt,3,3,"span",30)(54,ct,2,0,"span",30),i()()()()()}if(t&2){let e,a,s,m,k,H,v=d(2);r(4),c("disabled",v.submitting),r(7),y(" ",v.data==null?null:v.data.capitulo_slug),r(4),y(" ",v.getLanguageName()),r(5),_(v.data==null?null:v.data.texto_seleccionado),r(),c("formGroup",v.feedbackForm),r(6),C("error",((e=v.feedbackForm.get("sugerencia"))==null?null:e.invalid)&&((e=v.feedbackForm.get("sugerencia"))==null?null:e.touched)),r(2),y(" ",((a=v.feedbackForm.get("sugerencia"))==null||a.value==null?null:a.value.length)||0," / 1000 caracteres "),r(),c("ngIf",((s=v.feedbackForm.get("sugerencia"))==null?null:s.invalid)&&((s=v.feedbackForm.get("sugerencia"))==null?null:s.touched)),r(6),y(" ",((m=v.feedbackForm.get("razon"))==null||m.value==null?null:m.value.length)||0," / 500 caracteres "),r(8),C("error",((k=v.feedbackForm.get("user_email"))==null?null:k.invalid)&&((k=v.feedbackForm.get("user_email"))==null?null:k.touched)),r(),c("ngIf",((H=v.feedbackForm.get("user_email"))==null?null:H.invalid)&&((H=v.feedbackForm.get("user_email"))==null?null:H.touched)),r(3),c("ngIf",v.error),r(2),c("disabled",v.submitting),r(2),c("disabled",v.feedbackForm.invalid||v.submitting),r(),c("ngIf",!v.submitting),r(),c("ngIf",v.submitting)}}function mt(t,n){if(t&1){let e=w();o(0,"button",37),p("click",function(){f(e);let s=d(3);return h(s.openIssue())}),l(1," \u{1F517} Ver issue en GitHub "),i()}}function pt(t,n){if(t&1&&(o(0,"div",33)(1,"div",34),l(2,"\u2705"),i(),o(3,"h2"),l(4,"\xA1Gracias por tu aporte!"),i(),o(5,"p"),l(6," Tu sugerencia ha sido enviada y ser\xE1 revisada por el equipo. Se cre\xF3 un issue en GitHub para hacer seguimiento. "),i(),b(7,mt,2,0,"button",35),o(8,"small",36),l(9,"Este di\xE1logo se cerrar\xE1 autom\xE1ticamente..."),i()()),t&2){let e=d(2);r(7),c("ngIf",e.issueUrl)}}function ut(t,n){if(t&1){let e=w();o(0,"div",1),p("click",function(s){f(e);let m=d();return h(m.onOverlayClick(s))}),o(1,"div",2),b(2,dt,55,18,"div",3)(3,pt,10,1,"div",4),i()()}if(t&2){let e=d();c("@fadeIn",void 0),r(),c("@slideIn",void 0),r(),c("ngIf",!e.submitted),r(),c("ngIf",e.submitted)}}var te=class t{constructor(n,e){this.fb=n;this.http=e;this.feedbackForm=this.fb.group({sugerencia:["",[A.required,A.minLength(10),A.maxLength(1e3)]],razon:["",[A.maxLength(500)]],user_email:["",[A.email]],user_discord:[""]})}visible=!1;data=null;closed=new O;feedbackForm;submitting=!1;submitted=!1;error=null;issueUrl=null;ANALYTICS_URL="https://worker-analytics.trendingghost.workers.dev";getLanguageName(){return this.data?{en:"Ingl\xE9s",ja:"Japon\xE9s",pt:"Portugu\xE9s",fr:"Franc\xE9s"}[this.data.idioma]||this.data.idioma.toUpperCase():""}async submitFeedback(){if(this.feedbackForm.invalid||!this.data){this.feedbackForm.markAllAsTouched();return}this.submitting=!0,this.error=null;let n={capitulo_slug:this.data.capitulo_slug,idioma:this.data.idioma,texto_seleccionado:this.data.texto_seleccionado,sugerencia:this.feedbackForm.value.sugerencia.trim(),razon:this.feedbackForm.value.razon?.trim()||void 0,user_email:this.feedbackForm.value.user_email?.trim()||void 0,user_discord:this.feedbackForm.value.user_discord?.trim()||void 0};try{let e=await this.http.post(`${this.ANALYTICS_URL}/api/translation-feedback`,n).toPromise();e.success?(this.submitted=!0,this.issueUrl=e.issue_url,setTimeout(()=>{this.close()},3e3)):(this.error="Error al enviar la sugerencia. Por favor, intenta de nuevo.",this.submitting=!1)}catch(e){e.status===429?this.error="Demasiadas solicitudes. Por favor, espera un momento e intenta de nuevo.":this.error="Error al enviar la sugerencia. Por favor, verifica tu conexi\xF3n e intenta de nuevo.",this.submitting=!1}}close(){this.visible=!1,this.submitted=!1,this.error=null,this.issueUrl=null,this.feedbackForm.reset(),this.closed.emit({success:this.submitted})}openIssue(){this.issueUrl&&window.open(this.issueUrl,"_blank")}onOverlayClick(n){n.target.classList.contains("modal-overlay")&&this.close()}static \u0275fac=function(e){return new(e||t)(M(Le),M(xe))};static \u0275cmp=S({type:t,selectors:[["app-translation-feedback-dialog"]],inputs:{visible:"visible",data:"data"},outputs:{closed:"closed"},decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"translation-feedback-dialog"],["class","dialog-content",4,"ngIf"],["class","dialog-success",4,"ngIf"],[1,"dialog-content"],[1,"dialog-header"],["type","button",1,"btn-close",3,"click","disabled"],[1,"dialog-body"],[1,"context-info"],[1,"selected-text"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","sugerencia"],[1,"required"],["id","sugerencia","formControlName","sugerencia","rows","4","placeholder","Escribe aqu\xED tu traducci\xF3n sugerida..."],[1,"hint"],["class","error-message",4,"ngIf"],["for","razon"],["id","razon","formControlName","razon","rows","2","placeholder","\xBFPor qu\xE9 crees que esta traducci\xF3n es mejor?"],[1,"contact-group"],[1,"contact-header"],[1,"contact-hint"],[1,"contact-inputs"],["type","email","formControlName","user_email","placeholder","tu@email.com","aria-label","Tu email para recibir notificaciones"],["type","text","formControlName","user_discord","placeholder","usuario#1234","aria-label","Tu usuario de Discord para contacto"],["class","alert alert-error",4,"ngIf"],[1,"dialog-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"error-message"],[1,"alert","alert-error"],[1,"dialog-success"],[1,"success-icon"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[1,"auto-close"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,a){e&1&&b(0,ut,4,4,"div",0),e&2&&c("ngIf",a.visible)},dependencies:[I,D,Ae,Ee,Q,J,Oe,Fe,Te,V],styles:['@charset "UTF-8";.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);display:flex;align-items:center;justify-content:center;z-index:70;padding:1rem;overflow-y:auto}.translation-feedback-dialog[_ngcontent-%COMP%]{width:600px;max-width:90vw;max-height:90vh;overflow-y:auto;font-family:Courier New,monospace;background:#0a0a0a;border:3px solid #00ff00;border-radius:8px;box-shadow:0 10px 40px #000000b3,0 0 30px #00ff004d}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:2px solid #00ff00;background:linear-gradient(135deg,#000,#1a1a1a)}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#0f0;text-shadow:0 0 10px rgba(0,255,0,.5)}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#f06;cursor:pointer;padding:.5rem;transition:transform .2s ease}.btn-close[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.btn-close[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.dialog-body[_ngcontent-%COMP%]{padding:1.5rem;background:#0a0a0a;color:#e0e0e0}.context-info[_ngcontent-%COMP%]{background:#1a1a1a;border-left:4px solid #00ff00;padding:1rem;margin-bottom:1.5rem}.context-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:.9rem}.context-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0f0}.selected-text[_ngcontent-%COMP%]{margin-bottom:1.5rem}.selected-text[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#0cf;font-weight:700}.selected-text[_ngcontent-%COMP%]   blockquote[_ngcontent-%COMP%]{background:#1a1a1a;border-left:4px solid #00ccff;padding:1rem;margin:0;font-style:italic;color:#ccc;max-height:200px;overflow-y:auto}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#e0e0e0;font-weight:700}.required[_ngcontent-%COMP%]{color:#f06}textarea[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#1a1a1a;border:2px solid #333;border-radius:4px;color:#e0e0e0;font-family:Courier New,monospace;font-size:.95rem;transition:border-color .3s ease}textarea[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0f0;box-shadow:0 0 10px #00ff004d}textarea.error[_ngcontent-%COMP%], input.error[_ngcontent-%COMP%]{border-color:#f06}.hint[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.8rem;color:#888}.error-message[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.8rem;color:#f06}.contact-group[_ngcontent-%COMP%]{background:#1a1a1a;border:2px solid #333;border-radius:4px;padding:1rem;margin-bottom:1.5rem}.contact-header[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#0cf;font-weight:700}.contact-hint[_ngcontent-%COMP%]{display:block;font-size:.85rem;color:#aaa;margin-bottom:1rem}.contact-inputs[_ngcontent-%COMP%]{display:flex;gap:1rem}.contact-inputs[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;margin-bottom:0}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:4px;margin-bottom:1rem}.alert-error[_ngcontent-%COMP%]{background:#f063;border:2px solid #ff0066;color:#f06}.dialog-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:1.5rem;padding-top:1.5rem;border-top:2px solid #333}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:2px solid;border-radius:4px;font-family:Courier New,monospace;font-size:.95rem;font-weight:700;cursor:pointer;transition:all .3s ease;text-transform:uppercase}.btn-primary[_ngcontent-%COMP%]{background:#0f0;border-color:#0f0;color:#000}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0c0;box-shadow:0 0 20px #00ff0080;transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:transparent;border-color:#666;color:#e0e0e0}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#333;border-color:#999}.dialog-success[_ngcontent-%COMP%]{padding:3rem 2rem;text-align:center;background:linear-gradient(135deg,#0a0a0a,#1a1a1a)}.success-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_bounce .6s ease}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.dialog-success[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0f0;margin:1rem 0;text-shadow:0 0 10px rgba(0,255,0,.5)}.dialog-success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#e0e0e0;margin:1rem 0 2rem;line-height:1.6}.auto-close[_ngcontent-%COMP%]{display:block;margin-top:1.5rem;color:#888;font-size:.85rem;font-style:italic}@media(max-width:768px){.translation-feedback-dialog[_ngcontent-%COMP%]{width:100%;max-width:100%;height:100vh;max-height:100vh;border-radius:0}.contact-inputs[_ngcontent-%COMP%]{flex-direction:column;gap:0}.contact-inputs[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.dialog-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.btn[_ngcontent-%COMP%]{width:100%}}'],data:{animation:[j("fadeIn",[T(":enter",[P({opacity:0}),E("200ms ease-in",P({opacity:1}))]),T(":leave",[E("200ms ease-out",P({opacity:0}))])]),j("slideIn",[T(":enter",[P({transform:"translateY(-50px)",opacity:0}),E("300ms ease-out",P({transform:"translateY(0)",opacity:1}))])])]}})};var ne=class t{constructor(n){this.router=n}showMenu=new O;hideMenu=new O;menuAction=new O;showContextMenu(n){this.showMenu.emit(n)}hideContextMenu(){this.hideMenu.emit()}handleMenuAction(n,e){let a=n.action;switch(a){case"navigate-home":this.router.navigate(["/"]);break;case"navigate-home-main":this.router.navigate(["/"]);break;case"navigate-home-lore":this.router.navigate(["/capitulos"]);break;case"navigate-chapters":this.router.navigate(["/capitulos"]);break;case"navigate-characters":this.router.navigate(["/personajes"]);break;case"navigate-world":this.router.navigate(["/mundo"]);break;case"navigate-bestiary":this.router.navigate(["/bestiario"]);break;case"navigate-about":this.router.navigate(["/sobre"]);break;case"open-twitter":window.open("https://twitter.com/trendingghostofficial","_blank");break;case"open-kofi":window.open("https://ko-fi.com/trendingghost","_blank");break;case"open-github":window.open("https://github.com/trendingghostofficial","_blank");break;case"open-rss":window.open("/feed.xml","_blank");break;case"navigate-license":this.router.navigate(["/legal/license"]);break;case"navigate-privacy":this.router.navigate(["/legal/privacidad"]);break;case"navigate-terms":this.router.navigate(["/legal/terminos"]);break;case"navigate-manifesto":this.router.navigate(["/sobre/manifiesto"]);break;case"copy-url":this.copyToClipboard(e.currentUrl||window.location.href);break;case"copy-text":e.selectedText&&this.copyToClipboard(e.selectedText);break;case"navigate-analytics":this.router.navigate(["/commits"]);break;case"translation-feedback":this.menuAction.emit({action:"translation-feedback",data:{capitulo_slug:e.chapterSlug||"general",idioma:e.language||"es",texto_seleccionado:e.selectedText||""}});break;default:this.menuAction.emit({action:a,data:e});break}this.hideContextMenu()}copyToClipboard(n){if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(n).then(()=>{this.showNotification("Copiado al portapapeles")});else{let e=document.createElement("textarea");e.value=n,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),this.showNotification("Copiado al portapapeles")}catch(a){console.error("Error al copiar:",a),this.showNotification("Error al copiar")}e.remove()}}showNotification(n){let e=document.createElement("div");e.textContent=n,e.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(0, 255, 255, 0.9);
      color: black;
      padding: 10px 15px;
      border-radius: 5px;
      font-family: monospace;
      font-size: 14px;
      z-index: 10000;
      animation: fadeIn 0.3s ease;
    `,document.body.appendChild(e),setTimeout(()=>{e.style.animation="fadeOut 0.3s ease",setTimeout(()=>{document.body.removeChild(e)},300)},2e3)}static \u0275fac=function(e){return new(e||t)(q(L))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var ie=class t{constructor(n,e){this.contextMenuService=n;this.cdr=e}menuVisible=!1;menuData=null;feedbackVisible=!1;feedbackData=null;subscriptions=[];ngOnInit(){this.subscriptions.push(this.contextMenuService.showMenu.subscribe(n=>{this.showMenu(n)}),this.contextMenuService.hideMenu.subscribe(()=>{this.hideMenu()}),this.contextMenuService.menuAction.subscribe(n=>{this.handleMenuAction(n)}))}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}showMenu(n){this.menuData=n,this.menuVisible=!0,this.cdr.detectChanges()}hideMenu(){this.menuVisible=!1,this.menuData=null,this.cdr.detectChanges()}onMenuItemSelected(n){this.contextMenuService.handleMenuAction(n.item,n.data)}onMenuClosed(){this.hideMenu()}handleMenuAction(n){n.action==="translation-feedback"&&this.showTranslationFeedback(n.data)}showTranslationFeedback(n){this.feedbackData=n,this.feedbackVisible=!0}onFeedbackClosed(n){this.feedbackVisible=!1,this.feedbackData=null,n.success&&console.log("Feedback enviado exitosamente")}onContextMenu(n){if(n.preventDefault(),this.cdr.detectChanges(),this.menuVisible){this.hideMenu();return}let e=this.getSelectedText(),a=window.location.href,s=this.getCurrentLanguage(),m=this.getChapterSlug(),k={x:n.clientX,y:n.clientY,selectedText:e||void 0,currentUrl:a,language:s,chapterSlug:m};this.adjustMenuPosition(k),this.showMenu(k),this.cdr.detectChanges()}getSelectedText(){let n=window.getSelection();return n?n.toString().trim():null}getCurrentLanguage(){let e=window.location.pathname.match(/^\/([a-z]{2})\//);return e?e[1]:"es"}getChapterSlug(){let e=window.location.pathname.match(/\/capitulo\/([^\/]+)/);return e?e[1]:void 0}adjustMenuPosition(n){n.x+250>window.innerWidth&&(n.x=window.innerWidth-250-10),n.y+400>window.innerHeight&&(n.y=window.innerHeight-400-10),n.x=Math.max(10,n.x),n.y=Math.max(10,n.y)}onEscape(){this.hideMenu()}static \u0275fac=function(e){return new(e||t)(M(ne),M($))};static \u0275cmp=S({type:t,selectors:[["app-global-context-menu"]],hostBindings:function(e,a){e&1&&p("contextmenu",function(m){return a.onContextMenu(m)},F)("keydown.escape",function(){return a.onEscape()},F)},decls:2,vars:4,consts:[[3,"itemSelected","closed","visible","data"],[3,"closed","visible","data"]],template:function(e,a){e&1&&(o(0,"app-context-menu",0),p("itemSelected",function(m){return a.onMenuItemSelected(m)})("closed",function(){return a.onMenuClosed()}),i(),o(1,"app-translation-feedback-dialog",1),p("closed",function(m){return a.onFeedbackClosed(m)}),i()),e&2&&(c("visible",a.menuVisible)("data",a.menuData),r(),c("visible",a.feedbackVisible)("data",a.feedbackData))},dependencies:[I,ee,te],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;z-index:10000;pointer-events:none}"]})};function ft(t,n){if(t&1){let e=w();o(0,"header",2)(1,"div",3)(2,"a",4)(3,"span",5),l(4,"[:)]"),i(),o(5,"div",6)(6,"h1"),l(7),u(8,"translate"),i(),o(9,"span",7),l(10),u(11,"translate"),i()()(),o(12,"button",8),u(13,"translate"),p("click",function(){f(e);let s=d();return h(s.toggleMobileMenu())}),x(14,"span")(15,"span")(16,"span"),i(),o(17,"nav")(18,"a",9),p("click",function(){f(e);let s=d();return h(s.closeMobileMenu())}),l(19),u(20,"translate"),i(),o(21,"a",10),p("click",function(){f(e);let s=d();return h(s.closeMobileMenu())}),l(22),u(23,"translate"),i(),o(24,"a",11),p("click",function(){f(e);let s=d();return h(s.closeMobileMenu())}),l(25),u(26,"translate"),i(),o(27,"a",12),p("click",function(){f(e);let s=d();return h(s.closeMobileMenu())}),l(28),u(29,"translate"),i(),o(30,"a",13),p("click",function(){f(e);let s=d();return h(s.closeMobileMenu())}),l(31),u(32,"translate"),i(),x(33,"app-language-selector"),i()()()}if(t&2){let e=d();C("scrolled",e.headerScrolled)("logo-hidden",e.heroLogoVisible),r(2),C("fade-out",e.heroLogoVisible),r(5),_(g(8,18,"common.site_name")),r(3),_(g(11,20,"common.site_name_japanese")),r(2),C("active",e.mobileMenuOpen),pe("aria-label",g(13,22,"nav.toggle_menu")),r(5),C("mobile-open",e.mobileMenuOpen),r(2),_(g(20,24,"nav.chapters")),r(3),_(g(23,26,"nav.world")),r(3),_(g(26,28,"nav.characters")),r(3),_(g(29,30,"nav.bestiary")),r(3),_(g(32,32,"nav.about"))}}function ht(t,n){t&1&&(o(0,"footer",14)(1,"div",3)(2,"div",15)(3,"div",16)(4,"h3"),l(5),u(6,"translate"),i(),o(7,"p",17),l(8),u(9,"translate"),i(),o(10,"p",18),l(11),u(12,"translate"),i()(),o(13,"div",16)(14,"h4"),l(15),u(16,"translate"),i(),o(17,"ul",19)(18,"li")(19,"a",20),l(20),u(21,"translate"),i()(),o(22,"li")(23,"a",21),l(24),u(25,"translate"),i()(),o(26,"li")(27,"a",22),l(28),u(29,"translate"),i()()()(),o(30,"div",16)(31,"h4"),l(32),u(33,"translate"),i(),o(34,"ul",19)(35,"li")(36,"a",23),l(37),u(38,"translate"),i()(),o(39,"li")(40,"span",24),l(41),u(42,"translate"),i()()()(),o(43,"div",16)(44,"h4"),l(45),u(46,"translate"),i(),o(47,"ul",19)(48,"li")(49,"a",25),l(50),u(51,"translate"),i()(),o(52,"li")(53,"a",26),l(54),u(55,"translate"),i()(),o(56,"li")(57,"a",27),l(58),u(59,"translate"),i()()()()(),o(60,"div",28)(61,"p",29),l(62),u(63,"translate"),i(),o(64,"p",30),l(65),u(66,"translate"),x(67,"br"),l(68),u(69,"translate"),i()()()()),t&2&&(r(5),_(g(6,17,"common.site_name")),r(3),_(g(9,19,"footer.tagline")),r(3),_(g(12,21,"footer.copyright")),r(4),_(g(16,23,"footer.legal.title")),r(5),y("\u{1F4DC} ",g(21,25,"footer.legal.copyright_license")),r(4),y("\u270D\uFE0F ",g(25,27,"footer.legal.authorship")),r(4),y("\u{1F6E1}\uFE0F ",g(29,29,"footer.legal.safe_creative")),r(4),_(g(33,31,"footer.transparency.title")),r(5),y("\u{1F4CB} ",g(38,33,"footer.transparency.commit_history")),r(4),_(g(42,35,"footer.transparency.git_proof")),r(4),_(g(46,37,"footer.community.title")),r(5),y("\u{1F4E1} ",g(51,39,"footer.community.rss_feed")),r(4),y("\u2615 ",g(55,41,"footer.community.kofi")),r(4),y("\u{1F4AC} ",g(59,43,"footer.community.contact")),r(4),y('"',g(63,45,"footer.quote"),'"'),r(3),y(" \u2696\uFE0F ",g(66,47,"footer.legal_notice")," "),r(3),y(" ",g(69,49,"footer.legal_notice_extended")," "))}var oe=class t{constructor(n,e,a,s){this.platformId=n;this.router=e;this.headerVisibility=a;this.analytics=s;this.router.events.pipe(G(m=>m instanceof K)).subscribe(m=>{this.isLectorMode=m.url.includes("/capitulos/")&&m.url.split("/").length>3,R(this.platformId)&&(this.isLectorMode?document.body.classList.add("lector-mode"):document.body.classList.remove("lector-mode"),window.scrollTo({top:0,left:0,behavior:"instant"})),this.mobileMenuOpen=!1})}title=se("TRENDING GHOST");mobileMenuOpen=!1;headerScrolled=!1;heroLogoVisible=!0;isLectorMode=!1;ngOnInit(){this.headerVisibility.heroLogoVisible$.subscribe(n=>{this.heroLogoVisible=n})}onWindowScroll(){R(this.platformId)&&(this.headerScrolled=window.scrollY>50)}toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen,R(this.platformId)&&(this.mobileMenuOpen?document.body.classList.add("menu-open"):document.body.classList.remove("menu-open"))}closeMobileMenu(){this.mobileMenuOpen=!1,R(this.platformId)&&document.body.classList.remove("menu-open")}static \u0275fac=function(e){return new(e||t)(M(de),M(L),M(Ie),M(N))};static \u0275cmp=S({type:t,selectors:[["app-root"]],hostBindings:function(e,a){e&1&&p("scroll",function(){return a.onWindowScroll()},me)},decls:5,vars:4,consts:[["class","site-header",3,"scrolled","logo-hidden",4,"ngIf"],["class","site-footer",4,"ngIf"],[1,"site-header"],[1,"container"],["routerLink","/",1,"logo"],[1,"icon"],[1,"logo-text"],[1,"subtitle"],["type","button",1,"mobile-menu-toggle",3,"click"],["routerLink","/capitulos","routerLinkActive","active",3,"click"],["routerLink","/mundo","routerLinkActive","active",3,"click"],["routerLink","/personajes","routerLinkActive","active",3,"click"],["routerLink","/bestiario","routerLinkActive","active",3,"click"],["routerLink","/sobre","routerLinkActive","active",3,"click"],[1,"site-footer"],[1,"footer-main"],[1,"footer-section"],[1,"footer-tagline"],[1,"copyright"],[1,"footer-links-list"],["routerLink","/legal/license"],["routerLink","/legal/autoria"],["href","https://www.safecreative.org","target","_blank","rel","noopener"],["routerLink","/commits"],[1,"git-timestamp"],["href","/feed.xml","target","_blank","rel","noopener noreferrer"],["href","https://ko-fi.com/trendingghost","target","_blank","rel","noopener"],["routerLink","/contacto"],[1,"footer-bottom"],[1,"footer-quote"],[1,"footer-legal-notice"]],template:function(e,a){e&1&&(b(0,ft,34,34,"header",0),o(1,"main"),x(2,"router-outlet"),i(),b(3,ht,70,51,"footer",1),x(4,"app-global-context-menu")),e&2&&(c("ngIf",!a.isLectorMode),r(),C("lector-mode",a.isLectorMode),r(2),c("ngIf",!a.isLectorMode))},dependencies:[Me,we,ke,I,D,X,ie,V],styles:["main[_ngcontent-%COMP%]{min-height:calc(100vh - 160px)}main.lector-mode[_ngcontent-%COMP%]{min-height:100vh}"]})};ve(oe,je).catch(()=>{});
